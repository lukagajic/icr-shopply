[{"C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\index.js":"1","C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\reportWebVitals.js":"2","C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\App.js":"3","C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\components\\Header.js":"4","C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\components\\pages\\Register.js":"5","C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\components\\pages\\Login.js":"6","C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\components\\pages\\Categories.js":"7","C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\components\\pages\\Home.js":"8","C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\configuration\\constants.js":"9","C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\components\\pages\\Category.js":"10","C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\components\\pages\\UserProfile.js":"11","C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\components\\pages\\UserOrders.js":"12","C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\components\\pages\\Logout.js":"13","C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\components\\pages\\ProductDetails.js":"14","C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\components\\pages\\CartDetails.js":"15","C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\contexts\\AuthContext.js":"16","C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\contexts\\CartContext.js":"17","C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\components\\pages\\AdminDashboard.js":"18","C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\components\\pages\\AdminOrdersList.js":"19","C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\components\\CartMenuItem.js":"20"},{"size":613,"mtime":1609967127315,"results":"21","hashOfConfig":"22"},{"size":362,"mtime":499162500000,"results":"23","hashOfConfig":"22"},{"size":1985,"mtime":1610962421264,"results":"24","hashOfConfig":"22"},{"size":2388,"mtime":1610962374596,"results":"25","hashOfConfig":"22"},{"size":9207,"mtime":1610962644583,"results":"26","hashOfConfig":"22"},{"size":3900,"mtime":1610962634166,"results":"27","hashOfConfig":"22"},{"size":1951,"mtime":1609968974306,"results":"28","hashOfConfig":"22"},{"size":2545,"mtime":1610962297052,"results":"29","hashOfConfig":"22"},{"size":98,"mtime":1609716678838,"results":"30","hashOfConfig":"22"},{"size":7005,"mtime":1610970525511,"results":"31","hashOfConfig":"22"},{"size":14780,"mtime":1610962466032,"results":"32","hashOfConfig":"22"},{"size":8628,"mtime":1610966730554,"results":"33","hashOfConfig":"22"},{"size":935,"mtime":1609973560157,"results":"34","hashOfConfig":"22"},{"size":9883,"mtime":1610966913899,"results":"35","hashOfConfig":"22"},{"size":9083,"mtime":1610962443471,"results":"36","hashOfConfig":"22"},{"size":1315,"mtime":1610834072690,"results":"37","hashOfConfig":"22"},{"size":1249,"mtime":1610282680232,"results":"38","hashOfConfig":"22"},{"size":1334,"mtime":1610923531260,"results":"39","hashOfConfig":"22"},{"size":11510,"mtime":1610966343638,"results":"40","hashOfConfig":"22"},{"size":1821,"mtime":1610568033913,"results":"41","hashOfConfig":"22"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},"fu24wj",{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"51","usedDeprecatedRules":"44"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"64","messages":"65","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"66","usedDeprecatedRules":"44"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"69","messages":"70","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"71","usedDeprecatedRules":"44"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"74","messages":"75","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"76","usedDeprecatedRules":"44"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"81","usedDeprecatedRules":"44"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"86","usedDeprecatedRules":"44"},{"filePath":"87","messages":"88","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"89","usedDeprecatedRules":"44"},"C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\index.js",[],["90","91"],"C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\reportWebVitals.js",[],"C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\App.js",[],"C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\components\\Header.js",["92","93","94","95","96"],"import { Badge, Button, Nav, Navbar, NavDropdown } from \"react-bootstrap\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useContext } from \"react\";\r\nimport { AuthContext } from \"../contexts/AuthContext\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faShoppingCart } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { CartContext } from \"../contexts/CartContext\";\r\nimport CartMenuItem from \"./CartMenuItem\";\r\n\r\nexport default function Header() {\r\n  const { email, isLoggedIn, userRole } = useContext(AuthContext);\r\n\r\n  return (\r\n    <Navbar\r\n      collapseOnSelect\r\n      className=\"custom-bg-color\"\r\n      expand=\"lg\"\r\n      variant=\"dark\"\r\n    >\r\n      <Navbar.Brand>\r\n        <img\r\n          alt=\"logo\"\r\n          className=\"logo-image\"\r\n          src=\"https://i.ibb.co/j6bGZS7/logo.png\"\r\n        />\r\n      </Navbar.Brand>\r\n\r\n      <Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\r\n\r\n      <Navbar.Collapse id=\"responsive-navbar-nav\">\r\n        <Nav className=\"mr-auto\">\r\n          <Nav.Link as={Link} to=\"/\">\r\n            Početna strana\r\n          </Nav.Link>\r\n          <Nav.Link as={Link} to=\"/categories\">\r\n            Kategorije\r\n          </Nav.Link>\r\n        </Nav>\r\n        {isLoggedIn ? (\r\n          <>\r\n            <CartMenuItem />\r\n\r\n            <NavDropdown\r\n              alignRight=\"true\"\r\n              title={email}\r\n              id=\"basic-nav-dropdown\"\r\n            >\r\n              <NavDropdown.Item as={Link} to=\"/user/profile\">\r\n                Profil\r\n              </NavDropdown.Item>\r\n              <NavDropdown.Item as={Link} to=\"/user/orders\">\r\n                Moje porudžbine\r\n              </NavDropdown.Item>\r\n              <NavDropdown.Divider />\r\n              <NavDropdown.Item as={Link} to=\"/logout\">\r\n                Odjavite se\r\n              </NavDropdown.Item>\r\n            </NavDropdown>\r\n\r\n            {userRole === \"admin\" && (\r\n              <Nav.Link as={Link} to=\"/admin/dashboard\">\r\n                Administrativni panel\r\n              </Nav.Link>\r\n            )}\r\n          </>\r\n        ) : (\r\n          <Nav>\r\n            <Nav.Link as={Link} to=\"/login\">\r\n              Prijavite se\r\n            </Nav.Link>\r\n            <Nav.Link as={Link} to=\"/register\">\r\n              Registrujte se\r\n            </Nav.Link>\r\n          </Nav>\r\n        )}\r\n      </Navbar.Collapse>\r\n    </Navbar>\r\n  );\r\n}\r\n","C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\components\\pages\\Register.js",[],"C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\components\\pages\\Login.js",[],"C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\components\\pages\\Categories.js",[],"C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\components\\pages\\Home.js",[],"C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\configuration\\constants.js",[],"C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\components\\pages\\Category.js",["97","98","99"],"C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\components\\pages\\UserProfile.js",["100","101"],"import axios from \"axios\";\r\nimport { useContext, useEffect, useState } from \"react\";\r\nimport { Card, Col, Row, Button, Form, Alert } from \"react-bootstrap\";\r\nimport { AuthContext } from \"../../contexts/AuthContext\";\r\n\r\nimport constants from \"../../configuration/constants\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  faCalendarDay,\r\n  faCity,\r\n  faEdit,\r\n  faEnvelope,\r\n  faHome,\r\n  faMapMarked,\r\n  faUser,\r\n  faVenusMars,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { Modal } from \"react-bootstrap\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nexport default function UserProfile() {\r\n  const { userId, token, isLoggedIn } = useContext(AuthContext);\r\n  const [currentUser, setCurrentUser] = useState({\r\n    forename: \"\",\r\n    surname: \"\",\r\n    email: \"\",\r\n    bornAt: \"\",\r\n    gender: \"\",\r\n    address: \"\",\r\n    cityId: 0,\r\n    postalCode: \"\",\r\n    city: {\r\n        id: 0,\r\n        name: ''\r\n    }\r\n  });\r\n\r\n  const [showEditProfileModal, setShowEditProfileModal] = useState(false);\r\n  const [showEditPasswordModal, setShowEditPasswordModal] = useState(false);\r\n\r\n\r\n  const [showEditProfileError, setShowEditProfileError] = useState(false);\r\n  const [editProfileErrorMessage, setEditProfileErrorMessage] = useState('');\r\n\r\n\r\n  const [showEditPasswordSuccess, setShowEditPasswordSuccess] = useState(false);\r\n  const [showEditPasswordError, setShowEditPasswordError] = useState(false);\r\n\r\n  const [editPasswordSuccessMessage, setEditPasswordSuccessMessage] = useState('');\r\n  const [editPasswordErrorMessage, setEditPasswordErrorMessage] = useState('');\r\n\r\n  const [editPasswordData, setEditPasswordData] = useState({\r\n    oldPassword: '',\r\n    newPassword: ''\r\n  });\r\n\r\n  const handleShowEditProfileModal = () => {\r\n    setShowEditProfileModal(true);\r\n  };\r\n\r\n  const handleCloseEditProfileModal = () => {\r\n    getCurrentUser();\r\n    setShowEditProfileModal(false);\r\n  };\r\n\r\n  const handleShowEditPasswordModal = () => {\r\n    setShowEditPasswordModal(true);\r\n  };\r\n\r\n  const handleCloseEditPasswordModal = () => {\r\n    setShowEditPasswordModal(false);\r\n  };\r\n\r\n  const [cities, setCities] = useState([]);\r\n\r\n  function isFormValid() {\r\n    let areInputsValid = true;\r\n    if (currentUser.forename.length === 0 ||\r\n        currentUser.surname.length === 0 ||\r\n        currentUser.email.length === 0 ||\r\n        currentUser.bornAt.length === 0 ||\r\n        currentUser.gender.length === 0 ||\r\n        currentUser.address.length === 0 ||\r\n        currentUser.cityId < 1 ||\r\n        currentUser.postalCode.length === 0) {\r\n            areInputsValid = false;\r\n        };    \r\n    return areInputsValid;\r\n}\r\n\r\n  const handleEditProfile = (e) => {\r\n    e.preventDefault();\r\n\r\n    setEditProfileErrorMessage('');\r\n    setShowEditProfileError(false);\r\n    \r\n    if (!isFormValid()) return;\r\n\r\n    axios.put(`${constants.API_URL_PREFIX}/users/profile`, {\r\n      forename: currentUser.forename,\r\n      surname: currentUser.surname,\r\n      email: currentUser.email,\r\n      bornAt: currentUser.bornAt,\r\n      gender: currentUser.gender,\r\n      address: currentUser.address,\r\n      cityId: currentUser.cityId,\r\n      postalCode: currentUser.postalCode * 1\r\n    }, {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    }).then(serverData => {\r\n      if (serverData.data.success) {\r\n        getCurrentUser();\r\n        handleCloseEditProfileModal();\r\n      } else {\r\n        setEditProfileErrorMessage(serverData.data.message);\r\n        setShowEditProfileError(true);\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(`${constants.API_URL_PREFIX}/cities`)\r\n      .then((serverData) => {\r\n        setCities(serverData.data);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }, []);\r\n\r\n  const handleChange = (e) => {\r\n    setCurrentUser({ ...currentUser, [e.target.id]: e.target.value });\r\n  };\r\n\r\n  const allCities = cities.map((city) => (\r\n    <option key={city.cityId} value={city.cityId}>\r\n      {city.name}\r\n    </option>\r\n  ));\r\n\r\n\r\n  const handleChangePassword = (e) => {\r\n    if (editPasswordData.oldPassword.length < 6 || editPasswordData.newPassword.length < 6) {\r\n      return;\r\n    }\r\n\r\n    setEditPasswordErrorMessage('');\r\n    setEditPasswordSuccessMessage('');\r\n    setShowEditPasswordError(false);\r\n    setShowEditPasswordSuccess(false);\r\n\r\n    axios.patch(`${constants.API_URL_PREFIX}/users/password`, {\r\n      ...editPasswordData\r\n    }, {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}` \r\n      }\r\n    }).then(serverData => {\r\n      if (!serverData.data.success) {\r\n        setEditPasswordErrorMessage(serverData.data.message);\r\n        setShowEditPasswordError(true);\r\n      }\r\n      if (serverData.data.success) {\r\n        setEditPasswordSuccessMessage(serverData.data.message);\r\n        setShowEditPasswordSuccess(true);\r\n        handleCloseEditPasswordModal();\r\n      }\r\n    }).catch(err => console.log(`Doslo je do greske :${err}`));\r\n  }\r\n\r\n  const getCurrentUser = () => {\r\n    axios\r\n      .get(`${constants.API_URL_PREFIX}/users/profile`, {\r\n        headers: {\r\n          'Authorization': `Bearer: ${token}`\r\n        }\r\n      })\r\n      .then((serverData) => {\r\n\r\n        console.log(serverData.data);\r\n\r\n        setCurrentUser({\r\n          ...serverData.data,\r\n          birthday: `${serverData.data.bornAt\r\n            .toString()\r\n            .substring(8, 10)}.${serverData.data.bornAt\r\n            .toString()\r\n            .substring(5, 7)}.${serverData.data.bornAt\r\n            .toString()\r\n            .substring(0, 4)}.`,\r\n          postalCode: serverData.data.postalCode.toString(),\r\n        });\r\n\r\n        console.log(currentUser);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  useEffect(getCurrentUser, []);\r\n\r\n  const editUserProfileModal = (\r\n    <Modal show={showEditProfileModal} onHide={handleShowEditProfileModal}>\r\n      <Modal.Header>\r\n        <Modal.Title>Izmenite profil</Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n      { showEditProfileError &&\r\n      <Alert variant=\"danger\">{editProfileErrorMessage}</Alert>\r\n      }\r\n        <Form onSubmit={handleEditProfile}>\r\n          <Form.Row>\r\n            <Form.Group as={Col} controlId=\"forename\">\r\n              <Form.Label>Ime</Form.Label>\r\n              <Form.Control\r\n                value={currentUser.forename}\r\n                type=\"text\"\r\n                placeholder=\"Unesite Vaše ime\"\r\n                onChange={handleChange}\r\n              />\r\n              {currentUser.forename.length === 0 && (\r\n                <Form.Text className=\"text-danger\">\r\n                  Polje za ime ne sme biti prazno.\r\n                </Form.Text>\r\n              )}\r\n            </Form.Group>\r\n\r\n            <Form.Group as={Col} controlId=\"surname\">\r\n              <Form.Label>Prezime</Form.Label>\r\n              <Form.Control\r\n                value={currentUser.surname}\r\n                type=\"text\"\r\n                placeholder=\"Unesite Vaše prezime\"\r\n                onChange={handleChange}\r\n              />\r\n              {currentUser.surname.length === 0 && (\r\n                <Form.Text className=\"text-danger\">\r\n                  Polje za prezime ne sme biti prazno.\r\n                </Form.Text>\r\n              )}\r\n            </Form.Group>\r\n          </Form.Row>\r\n          <Form.Group controlId=\"email\">\r\n            <Form.Label>Email adresa</Form.Label>\r\n            <Form.Control\r\n              value={currentUser.email}\r\n              type=\"email\"\r\n              placeholder=\"Unesite Vašu E-mail adresu\"\r\n              onChange={handleChange}\r\n            />\r\n            {currentUser.email.length === 0 && (\r\n              <Form.Text className=\"text-danger\">\r\n                Polje za e-mail adresu ne sme biti prazno.\r\n              </Form.Text>\r\n            )}\r\n          </Form.Group>\r\n\r\n          <Form.Row>\r\n            <Form.Group controlId=\"bornAt\" as={Col}>\r\n              <Form.Label>Datum rođenja</Form.Label>\r\n              <Form.Control\r\n                value={currentUser.bornAt}\r\n                type=\"date\"\r\n                onChange={handleChange}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group controlId=\"gender\" as={Col}>\r\n              <Form.Label>Pol</Form.Label>\r\n              <Form.Control\r\n                value={currentUser.gender}\r\n                as=\"select\"\r\n                onChange={handleChange}\r\n              >\r\n                <option value=\"Male\">Muški</option>\r\n                <option value=\"Female\">Ženski</option>\r\n              </Form.Control>\r\n            </Form.Group>\r\n          </Form.Row>\r\n\r\n          <Form.Group controlId=\"address\">\r\n            <Form.Label>Adresa</Form.Label>\r\n            <Form.Control\r\n              value={currentUser.address}\r\n              type=\"text\"\r\n              placeholder=\"Unesite Vašu adresu\"\r\n              onChange={handleChange}\r\n            />\r\n            {currentUser.address.length === 0 && (\r\n              <Form.Text className=\"text-danger\">\r\n                Polje za adresu ne sme biti prazno.\r\n              </Form.Text>\r\n            )}\r\n          </Form.Group>\r\n\r\n          <Form.Row>\r\n            <Form.Group controlId=\"cityId\" as={Col}>\r\n              <Form.Label>Izaberite grad</Form.Label>\r\n              <Form.Control\r\n                value={currentUser.cityId}\r\n                as=\"select\"\r\n                onChange={handleChange}\r\n              >\r\n                {allCities}\r\n              </Form.Control>\r\n            </Form.Group>\r\n\r\n            <Form.Group controlId=\"postalCode\" as={Col}>\r\n              <Form.Label>Poštanski broj</Form.Label>\r\n              <Form.Control\r\n                value={currentUser.postalCode}\r\n                type=\"number\"\r\n                placeholder=\"Unesite poštanski broj\"\r\n                onChange={handleChange}\r\n              />\r\n              {currentUser.postalCode.length === 0 && (\r\n                <Form.Text className=\"text-danger\">\r\n                  Polje za poštanski broj ne sme biti prazno.\r\n                </Form.Text>\r\n              )}\r\n            </Form.Group>\r\n          </Form.Row>\r\n\r\n          <Button variant=\"secondary\" className=\"custom-bg-color\" type=\"submit\">\r\n            <FontAwesomeIcon icon={faEdit} /> Izmenite profil\r\n          </Button>\r\n        </Form>\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={handleCloseEditProfileModal}>\r\n          Odustani\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n\r\n  const editPasswordModal = (\r\n    <Modal show={showEditPasswordModal} onHide={handleCloseEditPasswordModal}>\r\n      <Modal.Header>\r\n        <Modal.Title>Izmenite lozinku</Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n      \r\n      {\r\n      showEditPasswordError &&\r\n      <Alert variant=\"danger\">\r\n        { editPasswordErrorMessage }\r\n      </Alert>\r\n      }\r\n      <Form.Group controlId=\"oldPassword\" as={Col}>\r\n          <Form.Label>Unesite staru lozinku</Form.Label>\r\n          <Form.Control value={editPasswordData.oldPassword} type=\"password\" onChange={(e) => setEditPasswordData({...editPasswordData, [e.target.id]: e.target.value})} />\r\n          { editPasswordData.oldPassword.length < 6 && \r\n              <Form.Text className=\"text-danger\">\r\n                  Lozinka mora imati najmanje 6 znakova\r\n              </Form.Text>\r\n          }\r\n      </Form.Group>\r\n      <Form.Group controlId=\"newPassword\" as={Col}>\r\n          <Form.Label>Unesite novu lozinku</Form.Label>\r\n          <Form.Control value={editPasswordData.newPassword} type=\"password\" onChange={(e) => setEditPasswordData({...editPasswordData, [e.target.id]: e.target.value})} />\r\n          { editPasswordData.newPassword.length < 6 && \r\n              <Form.Text className=\"text-danger\">\r\n                  Nova lozinka mora imati najmanje 6 znakova\r\n              </Form.Text>\r\n          }\r\n      </Form.Group>\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={handleCloseEditPasswordModal}>\r\n          Odustani\r\n        </Button>\r\n        <Button variant=\"primary\" onClick={handleChangePassword}>\r\n          Promeni lozinku\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n\r\n  return !isLoggedIn ? <Redirect to=\"/login\" /> : (\r\n    <Col className=\"mt-2\" md={{ span: 6, offset: 3 }}>\r\n      <Card>\r\n        <Card.Body>\r\n          { showEditPasswordSuccess &&\r\n            <Alert variant=\"success\">{editPasswordSuccessMessage}</Alert>\r\n          }\r\n          <Card.Title>Korisnički profil</Card.Title>\r\n          <>\r\n            <Button className=\"mr-2\" onClick={handleShowEditProfileModal}>\r\n              Izmenite profil\r\n            </Button>\r\n            {editUserProfileModal}\r\n          </>\r\n          <>\r\n            <Button onClick={handleShowEditPasswordModal}>\r\n              Izmenite lozinku\r\n            </Button>\r\n            {editPasswordModal}\r\n          </>\r\n          <hr />\r\n          <Row className=\"mt-3\">\r\n            <Col>\r\n              <p>\r\n                <FontAwesomeIcon icon={faUser} />\r\n                &nbsp;Ime i prezime\r\n              </p>\r\n              <h4>{`${currentUser.forename} ${currentUser.surname}`}</h4>\r\n            </Col>\r\n            <Col>\r\n              <p>\r\n                <FontAwesomeIcon icon={faEnvelope} />\r\n                &nbsp;E-mail adresa\r\n              </p>\r\n              <h4>{currentUser.email}</h4>\r\n            </Col>\r\n          </Row>\r\n          <Row className=\"mt-3\">\r\n            <Col>\r\n              <p>\r\n                <FontAwesomeIcon icon={faCalendarDay} />\r\n                &nbsp;Datum rođenja\r\n              </p>\r\n              <h4>{currentUser.birthday}</h4>\r\n            </Col>\r\n            <Col>\r\n              <p>\r\n                <FontAwesomeIcon icon={faVenusMars} />\r\n                &nbsp;Pol\r\n              </p>\r\n              <h4>{currentUser.gender === \"Male\" ? \"Muški\" : \"Ženski\"}</h4>\r\n            </Col>\r\n          </Row>\r\n          <Row className=\"mt-3\">\r\n            <Col>\r\n              <p>\r\n                <FontAwesomeIcon icon={faMapMarked} />\r\n                &nbsp;Grad\r\n              </p>\r\n              <h4>{currentUser.city.name}</h4>\r\n            </Col>\r\n            <Col>\r\n              <p>\r\n                <FontAwesomeIcon icon={faCity} />\r\n                &nbsp;Poštanski broj\r\n              </p>\r\n              <h4>{currentUser.postalCode}</h4>\r\n            </Col>\r\n          </Row>\r\n          <Row className=\"mt-3\">\r\n            <Col>\r\n              <p>\r\n                <FontAwesomeIcon icon={faHome} />\r\n                &nbsp;Adresa\r\n              </p>\r\n              <h4>{currentUser.address}</h4>\r\n            </Col>\r\n          </Row>\r\n        </Card.Body>\r\n      </Card>\r\n    </Col>\r\n  );\r\n}\r\n","C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\components\\pages\\UserOrders.js",["102","103"],"C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\components\\pages\\Logout.js",["104"],"import { useContext, useEffect } from \"react\";\r\nimport { Card, Col } from \"react-bootstrap\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { AuthContext } from \"../../contexts/AuthContext\";\r\n\r\nexport default function Logout() {\r\n\r\n    const { doLogout } = useContext(AuthContext);\r\n\r\n    useEffect(doLogout, []);\r\n\r\n    return (\r\n        <Col className=\"mt-2\" md={{ span: 6, offset: 3 }}>\r\n            <Card>\r\n                <Card.Body>\r\n                    <Card.Title>Uspešno ste se odjavili!</Card.Title>\r\n                    <ul>\r\n                        <li>\r\n                            <Link to=\"/\">Povratak na početnu stranu</Link>\r\n                        </li>\r\n                        <li>\r\n                            <Link to=\"/login\">Povratak na stranu za prijavljivanje</Link>\r\n                        </li>\r\n                    </ul>\r\n                </Card.Body>\r\n            </Card>\r\n        </Col>\r\n    )\r\n}\r\n","C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\components\\pages\\ProductDetails.js",["105","106"],"C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\components\\pages\\CartDetails.js",["107","108"],"import { faTrash } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport axios from \"axios\";\r\nimport { useContext, useEffect, useState } from \"react\";\r\nimport { Button, Card, Container, Form, Table, Modal, Toast } from \"react-bootstrap\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport constants from \"../../configuration/constants\";\r\nimport { AuthContext } from \"../../contexts/AuthContext\";\r\n\r\nexport default function CartDetails() {\r\n    const { userId, token, isLoggedIn } = useContext(AuthContext);\r\n\r\n    const [showNotification, setShowNotification] = useState(false);\r\n\r\n    const handleNotificationClose = () => {\r\n        setShowNotification(false);\r\n    }\r\n\r\n    const [cart, setCart] = useState({\r\n        cartId: 0,\r\n        userId: 0,\r\n        createdAt: '',\r\n        cartProducts: []\r\n    });\r\n\r\n    const [activeModal, setActiveModal] = useState(null);\r\n\r\n    function handleShow(e, index) {\r\n        setActiveModal(index);\r\n    }\r\n\r\n    function handleClose() {\r\n        setActiveModal(null);\r\n    }\r\n\r\n\r\n    function getCartDetails() {\r\n        axios.get(`${constants.API_URL_PREFIX}/users/cart`, {\r\n            headers: {\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n        }).then(serverData => {\r\n            setCart(serverData.data);\r\n            console.log(cart);\r\n            window.addEventListener('onCartUpdate', () => getCartDetails);\r\n        }).catch(err => {\r\n            console.log(err);\r\n        })\r\n    }\r\n    \r\n\r\n    useEffect(getCartDetails, []);\r\n\r\n    const handleChange = (e, cartId, productId) => {\r\n        if (e.target.value < 0) {\r\n            return\r\n        }\r\n        console.log(e.target.value);\r\n        axios.patch(`${constants.API_URL_PREFIX}/users/cart`, {\r\n            cartId, productId,\r\n            quantity: e.target.value * 1\r\n        } ,{\r\n            headers: {\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n        }).then(serverData => {\r\n            getCartDetails();\r\n        })\r\n        .catch(err => console.log(`Doslo je do greske ${err}`));\r\n    }\r\n\r\n    const handleRemoveFromCart = (e, cartId, productId) => {\r\n\r\n        console.log(cartId);\r\n        console.log(productId);\r\n        \r\n        axios.patch(`${constants.API_URL_PREFIX}/users/cart`, {\r\n            cartId, productId,\r\n            quantity: 0\r\n        } ,{\r\n            headers: {\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n        }).then(serverData => {\r\n            window.dispatchEvent(new CustomEvent('updatedcart'));\r\n            getCartDetails();\r\n        })\r\n        .catch(err => console.log(`Doslo je do greske ${err}`));\r\n    }\r\n    \r\n    const handleMakeAnOrder = () => {\r\n        console.log('KLIK')\r\n        axios.post(`${constants.API_URL_PREFIX}/users/orders`, {\r\n            cartId: cart.cartId\r\n        }, {\r\n            headers: {\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n        }).then(serverData => {\r\n            window.dispatchEvent(new CustomEvent('updatedcart'));\r\n            getCartDetails();\r\n            setShowNotification(true);\r\n        }).catch(err => console.log(`Doslo je do greske ${err}`));\r\n    }\r\n\r\n    const toast = <Toast style={{\r\n        position: 'fixed',\r\n        left: '50%',\r\n        bottom: '10px',\r\n        transform: 'translate(-50%, -50%)'\r\n    }} show={showNotification} onClose={handleNotificationClose} delay={3000} autohide>\r\n        <Toast.Header>\r\n            <strong className=\"mr-auto\">Shopply</strong>\r\n            <small>Upravo sada</small>\r\n        </Toast.Header>\r\n        <Toast.Body>Uspešno ste izvršili porudžbinu!</Toast.Body>\r\n    </Toast>;\r\n\r\n    return !isLoggedIn ? <Redirect to=\"/login\" /> : (\r\n        <Container className=\"mt-2\">\r\n            <Card>\r\n                <Card.Body>\r\n                    <Card.Title>Moja korpa</Card.Title>\r\n\r\n                    { cart === null || !cart.cartProducts || cart.cartProducts.length === 0 ?\r\n                        <p>Vaša korpa je prazna!</p> \r\n                     :\r\n                     <>\r\n                        <Table striped bordered hover>\r\n                        <thead>\r\n                            <tr>\r\n                                <th>Proizvod</th>\r\n                                <th>Količina</th>\r\n                                <th>Ukupna cena proizvoda</th>\r\n                                <th colspan=\"2\">Akcije</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tfoot>\r\n                            <tr>\r\n                                <th>Ukupna cena korpe</th>\r\n                                <td colspan=\"4\">{\r\n                                    cart.cartProducts.reduce((accumulator, current) => {\r\n                                        return accumulator + current.quantity * current.product.price\r\n                                    }, 0)\r\n                                } RSD</td>\r\n                            </tr>\r\n                        </tfoot>\r\n                        <tbody>\r\n                            {\r\n                                cart.cartProducts.map((item, index) => (\r\n                                    <tr>\r\n                                        <td>\r\n                                            <img src={item.product.photoPath} alt={item.product.title} style={{\r\n                                                width: '100px',\r\n                                                paddingRight: '5px'\r\n                                            }} />\r\n                                            <Link to={`/products/${item.product.productId}`}>{item.product.title}</Link>\r\n                                        </td>\r\n                                        <td>{item.quantity}</td>\r\n                                        <td>{item.product.price * item.quantity} RSD</td>\r\n                                        <td className=\"w-25\">\r\n                                            <Form.Label>Izmeni količinu</Form.Label>\r\n                                            <Form.Control step=\"1\" min=\"1\" value={item.quantity} type=\"number\" placeholder=\"Količina\" onChange={(e) => handleChange(e, cart.cartId, item.product.productId) } />\r\n                                        </td>\r\n                                        <td>\r\n                                            <>\r\n                                            <Button variant=\"danger\" onClick={(e) => handleShow(e, index)}>\r\n                                                <FontAwesomeIcon icon={faTrash} />&nbsp;\r\n                                                Ukloni iz korpe\r\n                                            </Button>\r\n\r\n                                            <Modal show={activeModal === index} onHide={handleClose}>\r\n                                                <Modal.Header closeButton>\r\n                                                    <Modal.Title>Uklanjanje iz korpe</Modal.Title>\r\n                                                </Modal.Header>\r\n                                                <Modal.Body>\r\n                                                    Da li ste sigurni da želite da uklonite ovaj proizvod iz korpe:&nbsp;\r\n                                                    <strong>\r\n                                                        {\r\n                                                            item.product.title\r\n                                                        }\r\n                                                    </strong>\r\n                                                </Modal.Body>\r\n                                                <Modal.Footer>\r\n                                                        <Button variant=\"secondary\" onClick={handleClose}>\r\n                                                            Ne\r\n                                                        </Button>\r\n                                                    <Button variant=\"primary\" onClick={(e) => handleRemoveFromCart(e, cart.cartId, item.product.productId)}>\r\n                                                        Da\r\n                                                    </Button>\r\n                                                </Modal.Footer>\r\n                                            </Modal>\r\n\r\n                                            </>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))\r\n                            }\r\n                            \r\n                        </tbody>\r\n                    </Table>\r\n                    <hr />\r\n                    <Button onClick={() => handleMakeAnOrder()} variant=\"success\" className=\"mb-2\">Izvrši porudžbinu</Button>\r\n                    <br />\r\n                     </>\r\n                    }\r\n\r\n                    {\r\n                        toast\r\n                    }\r\n                    \r\n                </Card.Body>\r\n            </Card>\r\n        </Container>\r\n    )\r\n}\r\n","C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\contexts\\AuthContext.js",[],"C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\contexts\\CartContext.js",["109","110","111"],"import React, { createContext, Component } from \"react\";\r\n\r\nimport { AuthContext } from \"./AuthContext\";\r\nimport axios from \"axios\";\r\nimport constants from \"../configuration/constants\";\r\n\r\nexport const CartContext = createContext();\r\n\r\nclass CartContextProvider extends Component {\r\n    state = {\r\n        cart: null,\r\n        productCount: 0\r\n    }\r\n\r\n    /* loadUserCart = () => {\r\n        axios.get(`${constants.API_URL_PREFIX}/users/cart`, {\r\n            headers: {\r\n                'Authorization': `Bearer ${this.context.token}`\r\n            }\r\n        }).then(serverData => {\r\n            this.setState({\r\n                cart: serverData.data,\r\n                productCount: serverData.data.cartProducts.length\r\n            });\r\n        }).catch(err => {\r\n            console.log(err);\r\n        })\r\n    } */\r\n\r\n    setCart = (cart) => {\r\n        this.setState({\r\n            cart,\r\n            productCount: cart.cartProducts.length\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <CartContext.Provider value={{...this.state, setCart: this.setCart, loadUserCart: this.loadUserCart}}>\r\n                {this.props.children}\r\n            </CartContext.Provider>\r\n        )\r\n    }\r\n}\r\n\r\nexport default CartContextProvider;\r\n","C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\components\\pages\\AdminDashboard.js",[],"C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\components\\pages\\AdminOrdersList.js",["112","113","114"],"import { useContext, useEffect, useState } from \"react\";\r\nimport { Redirect, Link } from \"react-router-dom\";\r\nimport { AuthContext } from \"../../contexts/AuthContext\"\r\nimport { Container, Card, Row, Col, Button, Table, Form, Modal } from \"react-bootstrap\";\r\nimport axios from \"axios\";\r\nimport constants from \"../../configuration/constants\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faCheck, faPause, faShoppingCart, faTimes } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nexport default function AdminOrdersList() {\r\n\r\n    const { userRole, token } = useContext(AuthContext);\r\n\r\n    const [orders, setOrders] = useState([]);\r\n    const [activeModal, setActiveModal] = useState(null);\r\n\r\n    function handleShow(e, index) {\r\n        setActiveModal(index);\r\n    }\r\n\r\n    function handleClose() {\r\n        setActiveModal(null);\r\n    }\r\n    \r\n    const getAllOrders = () => {\r\n        axios.get(`${constants.API_URL_PREFIX}/orders`, {\r\n            headers: {\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n        })\r\n            .then(serverData => {\r\n                console.log(serverData.data);\r\n                setOrders(serverData.data.map(orderData => {\r\n                    return {\r\n                        ...orderData,\r\n                        orderPrice: calculateCartPrice(orderData)\r\n                    }\r\n                }));\r\n            }).catch(err => console.log(`Doslo je do greske ${err}`));\r\n    }\r\n\r\n    const calculateCartPrice = (order) => order.cart.cartProducts.reduce((accumulator, current) => accumulator + current.quantity * current.product.price, 0) \r\n\r\n    useEffect(getAllOrders, []);\r\n\r\n    const handleChangeOrderStatus = (e, orderId) => {\r\n        e.preventDefault();\r\n        const newStatus = e.target[0].value;\r\n        \r\n        axios.patch(`${constants.API_URL_PREFIX}/orders/${orderId}/updateStatus`, {\r\n            status: newStatus\r\n        }, {\r\n            headers: {\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n        }).then(serverData => {\r\n            if (serverData.data.success) {\r\n                getAllOrders();\r\n            }\r\n        }).catch(err => console.log(`Doslo je do greske ${err}`));\r\n    }\r\n\r\n    return userRole !== 'admin' ? (\r\n        <Redirect to=\"/\" />\r\n    ) : (\r\n        <Container className=\"mt-2\">\r\n            <Card>\r\n                <Card.Body>\r\n                    <Card.Title>\r\n                        Administrativni panel\r\n                    </Card.Title>\r\n                    {\r\n                        orders.length === 0 ? <p>Ne postoji nijedna zavedena porudžbina!</p> :\r\n                        <Table striped bordered hover>\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>ID</th> \r\n                                    <th>Porudžbina kreirana</th>\r\n                                    <th>Sadržaj korpe</th>\r\n                                    <th>Ukupna cena korpe</th>\r\n                                    <th>Korisnik</th>\r\n                                    <th>Status</th>\r\n                                    <th>Akcije</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {\r\n                                    orders.map((order, index) => (\r\n                                        <tr>\r\n                                            <td>{order.orderId}</td>\r\n                                            <td>\r\n                                            {`${order.createdAt\r\n                                                .toString()\r\n                                                .substring(8, 10)}.${order.createdAt\r\n                                                    .toString()\r\n                                                    .substring(5, 7)}.${order.createdAt\r\n                                                    .toString()\r\n                                                    .substring(0, 4)}.`}\r\n                                            </td>\r\n                                            <td>\r\n                                            <>\r\n                                            <Button\r\n                                                variant=\"primary\"\r\n                                                onClick={(e) => handleShow(e, index)}\r\n                                            >\r\n                                                <FontAwesomeIcon icon={faShoppingCart} />&nbsp;\r\n                                                Sadržaj korpe\r\n                                            </Button>\r\n                                            <Modal dialogClassName=\"modal-90w\" show={activeModal === index} onHide={handleClose}>\r\n                                                <Modal.Header closeButton>\r\n                                                <Modal.Title>Sadržaj korpe</Modal.Title>\r\n                                                </Modal.Header>\r\n                                                <Modal.Body>\r\n                                                <Table striped bordered hover>\r\n                                                    <thead>\r\n                                                    <tr>\r\n                                                        <th>Proizvod</th>\r\n                                                        <th>Količina</th>\r\n                                                        <th>Ukupna cena proizvoda</th>\r\n                                                    </tr>\r\n                                                    </thead>\r\n\r\n                                                    <tbody>\r\n                                                    {order.cart.cartProducts.map((item, index) => (\r\n                                                        <tr>\r\n                                                        <td>\r\n                                                            <img\r\n                                                            src={item.product.photoPath}\r\n                                                            alt={item.product.title}\r\n                                                            style={{\r\n                                                                width: \"100px\",\r\n                                                                paddingRight: \"5px\",\r\n                                                            }}\r\n                                                            />\r\n                                                            <Link\r\n                                                            to={`/products/${item.product.productId}`}\r\n                                                            >\r\n                                                            {item.product.title}\r\n                                                            </Link>\r\n                                                        </td>\r\n                                                        <td>{item.quantity}</td>\r\n                                                        <td>\r\n                                                            {item.product.price * item.quantity} RSD\r\n                                                        </td>\r\n                                                        </tr>\r\n                                                    ))}\r\n                                                    </tbody>\r\n                                                </Table>\r\n                                                </Modal.Body>\r\n                                                <Modal.Footer>\r\n                                                <Button variant=\"secondary\" onClick={handleClose}>\r\n                                                    Izađi\r\n                                                </Button>\r\n                                                </Modal.Footer>\r\n                                            </Modal>\r\n                                            </>\r\n                                            </td>\r\n                                            <td>\r\n                                                { order.orderPrice } RSD\r\n                                            </td>\r\n                                            <td>\r\n                                                {`${order.cart.user.forename} ${order.cart.user.surname}`}\r\n                                            </td>\r\n                                            {order.status === \"accepted\" && (\r\n                                                <td>\r\n                                                <span className=\"greenText\">\r\n                                                    <FontAwesomeIcon icon={faCheck} />\r\n                                                        &nbsp;Prihvaćena\r\n                                                    </span>\r\n                                                </td>\r\n                                            )}\r\n                                            {order.status === \"rejected\" && (\r\n                                                <td>\r\n                                                <span className=\"redText\">\r\n                                                    <FontAwesomeIcon icon={faTimes} />\r\n                                                        &nbsp;Odbijena\r\n                                                    </span>\r\n                                                </td>\r\n                                            )}\r\n                                            {order.status === \"pending\" && (\r\n                                                <td>\r\n                                                <span>\r\n                                                    <FontAwesomeIcon icon={faPause} />\r\n                                                    &nbsp;Na čekanju\r\n                                                </span>\r\n                                                </td>\r\n                                            )}\r\n                                            <td>\r\n                                                <Form onSubmit={(e) => handleChangeOrderStatus(e, order.orderId)}>\r\n                                                    <Form.Group>\r\n                                                        <Form.Label>Izmenite status</Form.Label>\r\n                                                        <Form.Control defaultValue={order.status} as=\"select\">\r\n                                                            <option value=\"accepted\">Prihvaćena</option>\r\n                                                            <option value=\"rejected\">Odbijena</option>\r\n                                                            <option value=\"pending\">Na čekanju</option>\r\n                                                        </Form.Control>\r\n                                                        <Button className=\"mt-2\" type=\"submit\">Izmenite status</Button>\r\n                                                    </Form.Group>\r\n                                                </Form>\r\n                                            </td>\r\n                                        </tr>\r\n                                    ))\r\n                                }\r\n                            </tbody>\r\n                        </Table>\r\n                    }\r\n                </Card.Body>\r\n            </Card>\r\n        </Container> \r\n    )\r\n}\r\n","C:\\Users\\lgajic\\Desktop\\icr-aplikacija\\frontend\\src\\components\\CartMenuItem.js",["115"],"import { faShoppingCart } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport axios from \"axios\";\r\nimport { useContext, useEffect, useState } from \"react\";\r\nimport { Badge, Button } from \"react-bootstrap\";\r\nimport { Link } from \"react-router-dom\";\r\nimport constants from \"../configuration/constants\";\r\nimport { AuthContext } from \"../contexts/AuthContext\";\r\n\r\nexport default function CartMenuItem() {\r\n\r\n    const { token } = useContext(AuthContext);\r\n\r\n    const [productCount, setProductCount] = useState(0);\r\n\r\n    const getCartDetails = () => {\r\n        console.log(token);\r\n        if (token) {\r\n            console.log('POZVAO SE CART IKONICA!');\r\n            axios.get(`${constants.API_URL_PREFIX}/users/cart`, {\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`\r\n                }\r\n            }).then(serverData => {\r\n                window.addEventListener('updatedcart', getCartDetails);\r\n                console.log(serverData.data);\r\n                //console.log(serverData.data === null);\r\n\r\n                if (serverData.data !== null) {\r\n                    console.log('OVDEEEEE');\r\n                    setProductCount(serverData.data.cartProducts.length);\r\n                        \r\n                } else {\r\n                    console.log('OVDIII');\r\n                    setProductCount(0);\r\n                }\r\n            }).catch(err => {\r\n                console.log(err);\r\n            })\r\n        }\r\n    }\r\n\r\n    useEffect(getCartDetails, []);\r\n\r\n    return (\r\n        <Button as={Link} to=\"/user/cart\" variant=\"warning\">\r\n            <FontAwesomeIcon icon={faShoppingCart} /> Moja korpa <Badge variant=\"light\">{\r\n                productCount\r\n            }</Badge>\r\n        </Button>\r\n    )\r\n}\r\n",{"ruleId":"116","replacedBy":"117"},{"ruleId":"118","replacedBy":"119"},{"ruleId":"120","severity":1,"message":"121","line":1,"column":10,"nodeType":"122","messageId":"123","endLine":1,"endColumn":15},{"ruleId":"120","severity":1,"message":"124","line":1,"column":17,"nodeType":"122","messageId":"123","endLine":1,"endColumn":23},{"ruleId":"120","severity":1,"message":"125","line":5,"column":10,"nodeType":"122","messageId":"123","endLine":5,"endColumn":25},{"ruleId":"120","severity":1,"message":"126","line":6,"column":10,"nodeType":"122","messageId":"123","endLine":6,"endColumn":24},{"ruleId":"120","severity":1,"message":"127","line":7,"column":10,"nodeType":"122","messageId":"123","endLine":7,"endColumn":21},{"ruleId":"120","severity":1,"message":"128","line":5,"column":3,"nodeType":"122","messageId":"123","endLine":5,"endColumn":11},{"ruleId":"120","severity":1,"message":"129","line":27,"column":10,"nodeType":"122","messageId":"123","endLine":27,"endColumn":20},{"ruleId":"120","severity":1,"message":"130","line":27,"column":22,"nodeType":"122","messageId":"123","endLine":27,"endColumn":35},{"ruleId":"120","severity":1,"message":"131","line":22,"column":11,"nodeType":"122","messageId":"123","endLine":22,"endColumn":17},{"ruleId":"132","severity":1,"message":"133","line":204,"column":29,"nodeType":"134","endLine":204,"endColumn":31,"suggestions":"135"},{"ruleId":"120","severity":1,"message":"136","line":60,"column":10,"nodeType":"122","messageId":"123","endLine":60,"endColumn":23},{"ruleId":"132","severity":1,"message":"137","line":102,"column":34,"nodeType":"134","endLine":102,"endColumn":36,"suggestions":"138"},{"ruleId":"132","severity":1,"message":"139","line":10,"column":5,"nodeType":"122","endLine":10,"endColumn":14,"suggestions":"140"},{"ruleId":"120","severity":1,"message":"131","line":26,"column":30,"nodeType":"122","messageId":"123","endLine":26,"endColumn":36},{"ruleId":"132","severity":1,"message":"141","line":131,"column":32,"nodeType":"134","endLine":131,"endColumn":34,"suggestions":"142"},{"ruleId":"120","severity":1,"message":"131","line":11,"column":13,"nodeType":"122","messageId":"123","endLine":11,"endColumn":19},{"ruleId":"132","severity":1,"message":"143","line":52,"column":31,"nodeType":"134","endLine":52,"endColumn":33,"suggestions":"144"},{"ruleId":"120","severity":1,"message":"145","line":3,"column":10,"nodeType":"122","messageId":"123","endLine":3,"endColumn":21},{"ruleId":"120","severity":1,"message":"146","line":4,"column":8,"nodeType":"122","messageId":"123","endLine":4,"endColumn":13},{"ruleId":"120","severity":1,"message":"147","line":5,"column":8,"nodeType":"122","messageId":"123","endLine":5,"endColumn":17},{"ruleId":"120","severity":1,"message":"148","line":4,"column":27,"nodeType":"122","messageId":"123","endLine":4,"endColumn":30},{"ruleId":"120","severity":1,"message":"149","line":4,"column":32,"nodeType":"122","messageId":"123","endLine":4,"endColumn":35},{"ruleId":"132","severity":1,"message":"150","line":44,"column":29,"nodeType":"134","endLine":44,"endColumn":31,"suggestions":"151"},{"ruleId":"132","severity":1,"message":"152","line":43,"column":31,"nodeType":"134","endLine":43,"endColumn":33,"suggestions":"153"},"no-native-reassign",["154"],"no-negated-in-lhs",["155"],"no-unused-vars","'Badge' is defined but never used.","Identifier","unusedVar","'Button' is defined but never used.","'FontAwesomeIcon' is defined but never used.","'faShoppingCart' is defined but never used.","'CartContext' is defined but never used.","'Collapse' is defined but never used.","'searchData' is assigned a value but never used.","'setSearchData' is assigned a value but never used.","'userId' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'currentUser' and 'token'. Either include them or remove the dependency array.","ArrayExpression",["156"],"'ratingMessage' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'orders' and 'token'. Either include them or remove the dependency array.",["157"],"React Hook useEffect has a missing dependency: 'doLogout'. Either include it or remove the dependency array.",["158"],"React Hook useEffect has missing dependencies: 'product', 'productId', and 'reviews'. Either include them or remove the dependency array.",["159"],"React Hook useEffect has missing dependencies: 'cart', 'getCartDetails', and 'token'. Either include them or remove the dependency array.",["160"],"'AuthContext' is defined but never used.","'axios' is defined but never used.","'constants' is defined but never used.","'Row' is defined but never used.","'Col' is defined but never used.","React Hook useEffect has a missing dependency: 'token'. Either include it or remove the dependency array.",["161"],"React Hook useEffect has missing dependencies: 'getCartDetails' and 'token'. Either include them or remove the dependency array.",["162"],"no-global-assign","no-unsafe-negation",{"desc":"163","fix":"164"},{"desc":"165","fix":"166"},{"desc":"167","fix":"168"},{"desc":"169","fix":"170"},{"desc":"171","fix":"172"},{"desc":"173","fix":"174"},{"desc":"175","fix":"176"},"Update the dependencies array to be: [currentUser, token]",{"range":"177","text":"178"},"Update the dependencies array to be: [orders, token]",{"range":"179","text":"180"},"Update the dependencies array to be: [doLogout]",{"range":"181","text":"182"},"Update the dependencies array to be: [product, productId, reviews]",{"range":"183","text":"184"},"Update the dependencies array to be: [cart, getCartDetails, token]",{"range":"185","text":"186"},"Update the dependencies array to be: [token]",{"range":"187","text":"188"},"Update the dependencies array to be: [getCartDetails, token]",{"range":"189","text":"190"},[5797,5799],"[currentUser, token]",[2650,2652],"[orders, token]",[312,314],"[doLogout]",[3533,3535],"[product, productId, reviews]",[1579,1581],"[cart, getCartDetails, token]",[1666,1668],"[token]",[1564,1566],"[getCartDetails, token]"]